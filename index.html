<!DOCTYPE html>

<head>
    <meta charset="UTF-8">
    <title>avyazov.dev.calltouch.net</title>
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon.png">
    <!-- calltouch -->
    <script type="text/javascript">
        (function(w,d,n,c){w.CalltouchDataObject=n;w[n]=function(){w[n]["callbacks"].push(arguments)};
        if(!w[n]["callbacks"]){w[n]["callbacks"]=[]}w[n]["loaded"]=false;if(typeof c!=="object"){c=[c]}w[n]["counters"]=c;for(var i=0;i<c.length;i+=1){p(c[i])}function p(cId){var a=d.getElementsByTagName("script")[0],s=d.createElement("script"),i=function(){a.parentNode.insertBefore(s,a)},m=typeof Array.prototype.find === 'function',n=m?"init-min.js":"init.js";s.type="text/javascript";
                s.async=true;s.src="https://mod.calltouch.ru/"+n+"?id="+cId;if(w.opera=="[object Opera]"){d.addEventListener("DOMContentLoaded",i,false)}else{i()}}})(window,document,"ct","93e3968e");
    </script>
    <!-- calltouch -->
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-HZB1RZ8JVE"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-HZB1RZ8JVE');
    </script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-T9KH1P946V"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-T9KH1P946V');
    </script>

    <!-- calltouch -->
<!--    &lt;!&ndash; calltouch &ndash;&gt;-->
<!--    <script type="text/javascript">-->
<!--        (function(w,d,n,c){w.CalltouchDataObject=n;w[n]=function(){w[n]["callbacks"].push(arguments)};if(!w[n]["callbacks"]){w[n]["callbacks"]=[]}w[n]["loaded"]=false;if(typeof c!=="object"){c=[c]}w[n]["counters"]=c;for(var i=0;i<c.length;i+=1){p(c[i])}function p(cId){var a=d.getElementsByTagName("script")[0],s=d.createElement("script"),i=function(){a.parentNode.insertBefore(s,a)},m=typeof Array.prototype.find === 'function',n=m?"init-min.js":"init.js";s.type="text/javascript";s.async=true;s.src="https://mod.calltouch.ru/"+n+"?id="+cId;if(w.opera=="[object Opera]"){d.addEventListener("DOMContentLoaded",i,false)}else{i()}}})(window,document,"ct","xsud2r5k");-->
<!--    </script>-->
    <!-- calltouch -->
    <!-- datago -->
    <script type="text/javascript" async="1">
        ;(function(p, l, o, w, i, n, g) {
            if (!p[i]) {
                p.GlobalSnowplowNamespace = p.GlobalSnowplowNamespace || [];
                p.GlobalSnowplowNamespace.push(i);
                p[i] = function() {
                    (p[i].q = p[i].q || []).push(arguments)
                };
                p[i].q = p[i].q || [];
                n = l.createElement(o);
                g = l.getElementsByTagName(o)[0];
                n.async = 1;
                n.src = w;
                g.parentNode.insertBefore(n, g)
            }
        }(window, document, "script", "https://stream.datago.ru/tracker/sp.js", "snowplow"));

        window.snowplow('newTracker', 'sp', 'https://stream.datago.ru/collector', {
            appId: 'calltouch',
            maxPostBytes: 100000,
            maxLocalStorageQueueSize: 1000,
            resetActivityTrackingOnPageView: true,
            connectionTimeout: 5000,
            anonymousTracking: false,
            encodeBase64: false,
            contexts: {
                webPage: true,
                session: true,
                performanceTiming: true,
                gaCookies: true,
                geolocation: false,
                clientHints: true,
                encodeBase64: false,
            },
            retryStatusCodes: [],
            dontRetryStatusCodes: []
        });

        // Отправка события просмотра событий
        snowplow('trackPageView');
    </script>
    <script>
        // Функция для обновления содержимого страницы при изменении URL
        function handleNavigation() {
            const path = window.location.pathname;

            const routeContent =  document.getElementById('routeContent');

            if (routeContent) {
                // Обновление содержимого в зависимости от текущего пути
                switch (path) {
                    case '/':
                        routeContent.innerHTML = '<h2>Home Page</h2>';
                        break;
                    case '/path1':
                        routeContent.innerHTML = '<h2>Home Page/path1</h2>';
                        break;
                    case '/path2':
                    default:
                        routeContent.innerHTML = '<h2>Home Page/path2</h2>';
                }
            }
        }

        // Функция для навигации без перезагрузки страницы
        function navigateTo(path) {
            // Изменение URL без перезагрузки страницы
            history.pushState(null, null, path);

            // Обновление содержимого страницы
            handleNavigation();
        }

        // Обработка изменения URL при использовании кнопок навигации браузера
        window.onpopstate = handleNavigation;

        // Инициализация содержимого при первой загрузке страницы
        handleNavigation();
    </script>
    <!-- datago -->
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript" >
        (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
            m[i].l=1*new Date();
            for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
            k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
        (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

        ym(94444897, "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true
        });
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/94444897" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
</head>

<h1>Тестовый сайт</h1>
<p>-----------------------------------------------</p>
<header class="header-main" role="navigation">
    <div class="header-top">
        <ul>
            <li><a href="#" onclick="navigateTo('/'); return false;">Home</a></li>
            <li><a href="#" onclick="navigateTo('/path1'); return false;">path1</a></li>
            <li><a href="#" onclick="navigateTo('/path2'); return false;">path2</a></li>
        </ul>

        <div id="routeContent">
            <!-- Содержимое страницы будет обновляться здесь -->
        </div>

        <div class="header-top__wrapper">

            <div class="support-service isOpened">
                <a class="support-service__link js-open-support-service__dropdown" href="#" role="button">
                    <div class="support-service__text"> ул. Торговая, 22</div>
                    <div class="support-service__phone">+7 (499) 111 11 11</div><br>
                    <a class="tn-atom" href="callto:+7 (499) 111 11 11">Номер должен подмениться в тексте и в ссылке - +7 (499) 111 11 11</a><br>
                    <a class="tn-atom" href="http://74991111111">Номер должен подмениться ТОЛЬКО в тексте, НО НЕ в ссылке - 74991111111</a>
                    </svg>
                </a>
            </div>
        </div>
    </div>
</header>
<!--<header>Сайт для тестирования подмены</header>-->
<p>-----------------------------------------------</p>
<div></div>
<div class="support-service__phone">четыре девять девять, 7 единиц +7 (499) 111 11 11</div>
<p></p>
<div class="phone_number_1" id="test_phone_1">Телефон 1: +7 (499) 123-11-11</div>
<p></p>
<div class="phone_number_2" id="test_phone_2">Телефон 2: +7-499-123-2222</div>
<p></p>
<div class="phone_number_3" id="test_phone_3">Телефон 3: +7 499 1233333</div>
<p></p>
<div class="phone_number_4" id="test_phone_4">Телефон 4: 84991234444</div>
<p></p>
<a href="tel:+78002012015" class="top_phone">+7(800) 201-20-15</a>
<p></p>
<a href="tel:74991235555" class="phone_number_6" id="test_phone_6">Телефон 5: +7 499 123-55-55</a>
<p></p>
<a href="tel:&#43;7%20%28343%29%20228-38-33">+7 (343) 228-38-33</a>

<div>Для круглосуточных звонков: 8 <b>(495)</b> 123-45-67 Находимся по адресу: пр. Просвещения, д. 198. Перед посещением звоните  8 <b>(495)</b> 198-12-22.</div>
<p></p>
<div>Для звонков: 8 <b>(34123)</b> 2-71-52<b> Этот текст должен быть выделен жирным +7 (34123) 2-71-52</b></div>
<p></p>
<div>Подмена на восемь восемьсот: 8 <b>(383612)</b> 44-44<b> Этот текст должен быть выделен жирным +7 (383612) 44-44</b></div>
<p></p>
<div>Подмена на восемь восемьсот: 8 <b>(38361)</b> 244-44<b> Этот текст должен быть выделен жирным +7 (38361) 2-4444</b></div>
<p></p>
<div>Подмена с восемь восемьсот на другой код города: 8 <b>(800)</b> 333-44-44<b> Этот текст должен быть выделен жирным +7 (800) 333-44-44</b></div>
<p></p>

<a class="tn-atom" href="tel:+74991111111">Номер должен подмениться в тексте и в ссылке - +7 (495) 123 45 67</a>

<div><a class="tn-atom" href="tel:+74991111111">Номер должен подмениться в тексте и в ссылке -  123 45 67</a></div>

<div><a class="tn-atom" href="tel:1111111">Номер должен подмениться в тексте и в ссылке -  123 45 67</a></div>

<div><a class="tn-atom" href="tel:1234567">Номер должен подмениться в тексте и в ссылке -  123 45 67</a></div>

<a class="tn-atom" href="tel:88002012015">Номер должен подмениться в тексте и в ссылке - 8 (800) 201-20-15</a>

<div><b>------------------------------------------</b></div>
<div><b>Не должно быть подмены:</b></div><br>
<div>123456</div>
<div>1234567</div>
<span><b></b>123-45-67</span><br>
<div><i>123 45 67</i></div><span>495</span><br>
<div><span>8(495) 555-55-55</span> <span>8(800) 123-45-67</span></div>
<p></p>
<div>
    ...или напишите
    <a href="https://api.whatsapp.com/send?phone=+74991231111">нам в WhatsApp!</a>
    (Ссылка WhatsApp не должна подменяться).
</div>
<p></p>
<div><b>------------------------------------------</b></div><br>

<br/>
<div class="NoForm__text">Номер счета 40702810800103334444 - в идеале не должен подменяться</div>
<br/>
<div class="NoForm__text">Просто какой-то номер - 3334444</div>

<div><b>--------------Автоцели--------------------</b></div><br>
<a href="mailto:test-autogoal@calltouch.net">Почта: test-autogoal@calltouch.net</a><br>

<a href="https://wa.me/79991234567">WhatsApp</a><br>
<a href="tg://resolve?domain=norDeman">Telegram</a><br>
<a class="tn-atom" href="tel:+7 (499) 111 11 11">Номер должен подмениться в тексте и в ссылке - +7 (499) 111 11 11</a><br>
<a class="tn-atom" href="http://74991111111">Номер должен подмениться ТОЛЬКО в тексте, НО НЕ в ссылке - 74991111111</a>


<form name="main-test" class="Form" method="post" onsubmit={console.log("submit")}>
    <p>
        <b class="FormWrapper__question">
            Помогите нам узнать Вас получше
        </b>
    </p>
    <p class="variants">
    <div class="Form__text">Имя</div>
    <input type="text" name="name" value="" placeholder="Введите ваше имя"/><br/>
    <div class="Form__text">Номер телефона</div>
    <input type="number" name="phone" value="" placeholder="+7 (___) ___-__-__" maxlength=11/>
    <div class="Form__text">E-mail</div>
    <input type="email" name="e-mail" value="" />
    <div class="some">Теперь мы все про Вас знаем</div>
    </p>
    <input type="reset" name="reset" />
    <p><input type="submit" /></p>
    <button class="Form__button"> Ещё одна кнопка</button>
</form>

<br/><br/><br/>
<div class="NoForm">
    <div class="NoForm__title">Мы вернем Ваши деньги</div>
    <div class="NoForm__wrapper-main">
        <div class="NoForm__text">Нет ничего невозможного</div>
        <input class="NoForm__input-1" id="unic" type="text" />
        <div class="NoForm__text" >Есть только миг</div>
        <input class="NoForm__input-2" required />
        <div class="NoForm__text">Подожди минуту</div>
        <button class="NoForm__button">Нажми и держись</button>
    </div>
</div>


<div>
    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 2161 1477" style="enable-background:new 0 0 2161 1477;" xml:space="preserve">
<a class="open-ground-1" xmlns="http://www.w3.org/2000/svg">
<polygon data-number="g-1" class="ground g-free" points="895.1,425.6 882,285.4 1008.8,214.7 1123.1,204.5 1140.9,403.6"></polygon>
</a>
</svg>
</div>


<div><b>подмена полного номера:</b></div><br>
<div><b>между цифрами кода допускаем нахождение только пробельных символов - '\s*',</b></div><br>
<div>+7 (4 9 5) 123-45-67 подменится</div><br>
<div>+7 (4  9 5) 123-45-67 подменится</div><br>
<div><b>между кодом и номером - допускаем нахождение любых символов кроме цифр - '\D*',</b></div><br>
+7 (495)//123-45-67 подменится</div><br>
+7 (495)1123-45-67 не подменится</div><br>
<div><b>между цифрами номера - допускаем нахождение любых символов кроме цифр - '\D*'.</b></div><br>
+7 (495)//123-45**67 подменится</div><br>
+7 (495)//123-451167 не подменится</div><br>

<div><b>подмена частичного номера:</b></div><br>
<div><b>между цифрами кода допускаем любые символы кроме цифр, букв, символа "плюс", запятой и точки</b></div><br>
1+23-45-67 не подменится</div><br>
1.23-45-67 не подменится</div><br>
1,23-45-67 не подменится</div><br>
1123-45-67 не подменится</div><br>
1/23-45-67 подменится</div><br>

<div><b>Проверяем, что следом за номером нет других цифр идущих через пробелы или без них</b></div><br>
123-45-67 подменится</div><br>
123-45-67123 не подменится</div><br>
123-45-67 123 не подменится</div><br>
<div><b>Дополнительно после нахождения частичного номера отдельным запросом проверяем, что сразу перед ним нет цифр и вблизи нет подряд идущих цифр похожих на код города. Игнорируем если номеру предшествует любая цифра (через пробельные символы) </b></div><br>
81 123-45-67 - не подменится</div><br>
<div><b>или если перед номером есть 3-7 подряд (или через пробелы) идущих цифр (которые могут быть другим кодом) и между этими цифрами и номером меньше 4-х непробельных символов (и не цифр)</b></div><br>
<div>111///123-45-67 не подменится</div><br>
<div>11 111 11////123-45-67 подменится </div><br>
<div>+7 ((((800)))) 1234567 -подменится </div><br>
<div>+7 (((800))) 1234567 не подменится</div><br>
<div>Форматирование в ссылке сохранится:</div><br>
<div><a href="tel:+7(495)123-45-67">+74951234567</a></div><br>
<div>Белорусские номера можно использовать:</div><br>
<div><a href="tel:+375 17 209-90-75">+375 17 209-90-75</a></div><br>
<div>Частичные номера в ссылке не подменяются (как и раньше):</div><br>
<div><a href="tel:123-45-67">Позвоните нам</a></div><br>

